(()=>{"use strict";var e={4970:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.handler=void 0;const r=new(n(5990).DynamoDB),a=process.env.VOTING_TABLE,i=()=>{var e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e-t)/864e5),o=Math.ceil((e.getDay()+1+n)/7);return console.log(o),o};t.handler=e=>o(void 0,void 0,void 0,(function*(){const t=JSON.parse(e.body||"{}");let n=!1;var s;return s=t.programmer,[["even_p1","even_p2","even_p3","even_p4"],["odd_p1","odd_p2","odd_p3","odd_p4"]][i()%2].includes(s)&&(e=>{const t=(new Date).getUTCDay();return t>=1&&t<=5})()&&(n=!0),n?(yield((e,t)=>o(void 0,void 0,void 0,(function*(){console.log("here");const n=i().toString(),o=(console.log((new Date).getFullYear()),(new Date).getFullYear()).toString(),s=`INSERT INTO "${a}" value \n      {'user' : '${e}#${n}#${o}',\n       'rec_type' : 'Vote',\n       'year' : ${o},\n       'weekNumber': ${n},\n      'programmer': '${t}'\n    }`;console.log(s),yield r.executeStatement({Statement:s}).promise().catch((e=>{console.log(e)}))})))(t.email,t.programmer),{statusCode:200,headers:{"Content-Type":"application/json"},body:""}):{statusCode:200,headers:{"Content-Type":"application/json"},body:""}}))},5990:e=>{e.exports=require("aws-sdk")}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(4970);module.exports=n})();
//# sourceMappingURL=vote.js.map