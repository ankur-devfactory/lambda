(()=>{"use strict";var e={607:function(e,o,r){var t=this&&this.__awaiter||function(e,o,r,t){return new(r||(r=Promise))((function(n,s){function i(e){try{c(t.next(e))}catch(e){s(e)}}function a(e){try{c(t.throw(e))}catch(e){s(e)}}function c(e){var o;e.done?n(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(i,a)}c((t=t.apply(e,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0}),o.handler=void 0;const n=new(r(990).SNS)({apiVersion:"2010-03-31"});o.handler=e=>t(void 0,void 0,void 0,(function*(){const o=e.Records,r=["apple","banana","orange","strawberry","cherry"],t=[];o.forEach((e=>{try{JSON.parse(e.body)}catch(e){return console.log("error!"),console.log("Please check the request format"),{statusCode:400,body:JSON.stringify("Bad Request!")}}const o=JSON.parse(e.body),s=o.productID,i=o.textFields;if(void 0===i||"undefined"===s)return console.log("error!"),console.log("Please check the request forma"),{statusCode:400,body:JSON.stringify("Bad Request!")};let a=new Set,c=!1;for(const e in i){let o=i[e].toLowerCase();r.forEach((e=>{o.includes(e)&&(a.add(e),c=!0)}))}if(c){const e={productID:s,flaggedWords:Array.from(a)};console.log(JSON.stringify(e));const o={Message:JSON.stringify(e),TopicArn:process.env.snsARN},r=n.publish(o);t.push(r.promise())}})),yield Promise.all(t)}))},990:e=>{e.exports=require("aws-sdk")}},o={},r=function r(t){var n=o[t];if(void 0!==n)return n.exports;var s=o[t]={exports:{}};return e[t].call(s.exports,s,s.exports,r),s.exports}(607);module.exports=r})();
//# sourceMappingURL=index.js.map